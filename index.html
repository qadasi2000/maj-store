<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ูุญูุธุฉ ุงููุงุฌุฏ V2.4</title> 
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "ูุญูุธู ุงููุงุฌุฏ",
      "operatingSystem": "ANDROID",
      "applicationCategory": "BusinessApplication",
      "url": "https://almajed.store"
    }
    </script>
</head>
<body>

<div class="bg-particles"></div>

<div id="printable-vouchers" class="voucher-print-grid no-print"></div>

<input type="file" id="chat-file-input" style="display: none;" accept="image/*,application/pdf" onchange="handleFileSelect(this)">

<div id="maintenance-modal" class="maintenance-overlay hidden">
    <div style="font-size: 4rem; margin-bottom: 20px; color: var(--gold);">๐๏ธ</div>
    <h2 style="color: var(--gold);">ุงููุธุงู ูู ูุถุน ุงูุตูุงูุฉ</h2>
    <p style="opacity: 0.8; max-width: 300px; margin: 0 auto; line-height: 1.6;">ูููู ุญุงููุงู ุจุจุนุถ ุงูุชุญุณููุงุช ูุงูุชุญุฏูุซุงุช ูุฎุฏูุชูู ุจุดูู ุฃูุถู.<br>ูุฑุฌู ุงููุญุงููุฉ ุจุนุฏ ูููู.</p>
    <button class="btn" style="width: auto; margin-top: 30px; background: transparent; border: 1px solid #fff;" onclick="location.reload()">ุชุญุฏูุซ ุงูุตูุญุฉ</button>
</div>

<div id="offline-alert" class="offline-banner no-print">โ๏ธ ูุง ููุฌุฏ ุงุชุตุงู ุจุงูุฅูุชุฑูุช - ูุชู ุนุฑุถ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ</div>

<div id="pwa-install-banner" class="pwa-banner no-print">
    <div style="display:flex; align-items:center; gap:10px;">
        <span style="font-size:2rem;">๐</span>
        <div style="text-align:right;">
            <div style="font-weight:bold; font-size:0.9rem;">ุชุทุจูู ุงููุงุฌุฏ </div>
            <small style="opacity:0.8; font-size:0.75rem;">ุชุซุจูุช ูููุตูู ุงูุณุฑูุน</small>
        </div>
    </div>
    <button onclick="installPWA()" style="background:var(--gold); color:#000; border:none; padding:8px 15px; border-radius:10px; font-weight:bold;">ุชุซุจูุช</button>
    <div onclick="closePWA()" style="position:absolute; top:5px; left:10px; opacity:0.7; font-size:1.2rem;">&times;</div>
</div>

<div id="loader" style="position: fixed; inset: 0; background: rgba(15,0,6,0.95); z-index: 99999; display:none; flex-direction: column; align-items: center; justify-content: center;">
    <div style="border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid var(--gold); border-radius: 50%; width: 60px; height: 60px; animation: spin 0.8s linear infinite; box-shadow: 0 0 20px rgba(249, 217, 118, 0.2);"></div>
    <p style="color:var(--gold); margin-top:20px; font-weight:800; letter-spacing:1px;">ุฌุงุฑู ุงููุนุงูุฌุฉ...</p>
</div>

<div class="whatsapp-float no-print" onclick="playSound('click'); vibrate(); openWhatsAppSupport()" id="wa-btn-chat">๏ฒ</div>
<div class="refresh-float no-print hidden" id="refresh-btn" onclick="playSound('click'); vibrate(); refreshData()">๐</div>
<div class="info-float client-item no-print hidden" id="info-btn" onclick="playSound('click'); showInstructionsModal()">?</div>

<div id="app-header" class="header hidden no-print">
    <div class="menu-toggle" onclick="playSound('click'); vibrate(); toggleMenu()">โฐ</div>
    <div style="color:var(--gold); font-weight:900; font-size:1.3rem; display: flex; align-items: center; gap: 8px;">
        ุงููุงุฌุฏ  <span style="font-size:0.7rem; background:var(--gold); color:#000; padding:2px 5px; border-radius:4px;">V2.4</span>
        <div id="ping-dot" class="ping-indicator"></div>
    </div>
    <div class="notif-box" onclick="checkNotifications()">
        <div class="notif-icon">๐</div>
        <div id="notif-badge" class="notif-badge hidden">0</div>
    </div>
</div>

<div id="news-bar" class="news-bar-container no-print">
    <div id="news-content" class="news-text"></div>
</div>

<div class="overlay no-print" id="overlay" onclick="toggleMenu()"></div>

<div class="side-menu no-print" id="side-menu">
    <div class="sidebar-header">
        <div class="sidebar-avatar">๐ค</div>
        <div id="menu-user-name" class="sidebar-name">ุฒุงุฆุฑ</div>
        <div id="menu-user-id" class="sidebar-id">--------</div>
        <div id="menu-user-rank" style="color:var(--success); font-size:0.75rem; margin-top:5px; font-weight:bold;"></div>
    </div>
    
    <div class="client-item" onclick="switchSec('dashboard')" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</div>
    <div class="client-item" onclick="switchSec('store')" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ ูุชุฌุฑ ุงูุจุงูุงุช</div>
    <div class="client-item" onclick="switchSec('mycards'); loadMyCards()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ณ ุณุฌู ูุฑูุชู</div>
    <div class="client-item" onclick="switchSec('topup'); loadLogs()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">โ ุดุญู ุงูุฑุตูุฏ</div>
    <div class="client-item" onclick="document.getElementById('voucher-modal').style.display='flex'" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ซ ุดุญู ูุงูุชุดุฑ</div>
    <div class="client-item" onclick="switchSec('loans'); loadLoans()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ฐ ุฎุฏูุฉ ุณูููู</div>
    <div class="client-item" onclick="switchSec('transfer')" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ธ ุชุญููู ุฑุตูุฏ</div>
    <div class="client-item" onclick="switchSec('wheel'); loadWheel()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ก ุนุฌูุฉ ุงูุญุธ</div>
    <div class="client-item" onclick="switchSec('statement'); loadStatement()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ ูุดู ุงูุญุณุงุจ</div>
    <div class="client-item" onclick="switchSec('tickets'); loadTickets()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ซ ุชุฐุงูุฑ ุงูุฏุนู</div>
    <div class="client-item" onclick="switchSec('chat'); loadChat()" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">๐ฌ ุดุงุช ุงูุนููุงุก</div>
    
    <div class="client-item" onclick="switchSec('account')" style="padding:15px; cursor:pointer; border-bottom:1px solid rgba(255,255,255,0.03);">โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ</div>

    <div id="admin-menu-btn" class="hidden" onclick="switchSec('admin')" style="padding:15px; color:var(--gold); font-weight:bold; border-bottom:1px solid rgba(255,255,255,0.03);">๐ก๏ธ ููุญุฉ ุงููุฏูุฑ</div>
    <div id="impersonate-badge" class="hidden" style="color:var(--error); font-size:0.8rem; padding:12px; border:1px dashed var(--error); margin-top:15px; text-align:center; border-radius:10px;">โ๏ธ ูุถุน ุงูุชููุต ูุดุท</div>
    <div onclick="logout()" style="color:var(--error); margin-top:30px; padding:15px; cursor:pointer; font-weight:bold; text-align:center;">๐ช ุชุณุฌูู ุงูุฎุฑูุฌ</div>
</div>

<div id="toast" class="no-print"></div>

<div id="notif-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">๐ ุงูุฅุดุนุงุฑุงุช</h3>
        <div id="notif-list" style="text-align:right; max-height:250px; overflow-y:auto; margin-bottom:15px;"></div>
        <button class="btn" onclick="closeModal('notif-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="monthly-report-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">๐ ุงูุชูุฑูุฑ ุงููุงูู ุงูุดูุฑู</h3>
        <p style="opacity:0.7; font-size:0.8rem; margin-bottom:20px;">ููุฎุต ูุดุงุทู ุงููุงูู ููุดูุฑ ุงูุญุงูู</p>
        <div class="report-circle" id="report-chart">
            <div class="report-content">
                <div style="font-size:0.7rem; opacity:0.7;">ุฅุฌูุงูู ุงููุตุฑูู</div>
                <div id="report-spent" style="color:var(--error); font-size:1.2rem;">0</div>
            </div>
        </div>
        <div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:10px;">
            <span>๐ฅ ุฅุฌูุงูู ุงูุดุญู/ุงููุงุฑุฏ:</span>
            <span id="report-charged" style="color:var(--success); font-weight:bold;">0</span>
        </div>
        <div style="display:flex; justify-content:space-between;">
            <span>๐ค ุฅุฌูุงูู ุงูุตุฑู:</span>
            <span id="report-total-out" style="color:var(--error); font-weight:bold;">0</span>
        </div>
        <button class="btn" style="margin-top:20px;" onclick="closeModal('monthly-report-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="instructions-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">๐ ุงูุชุนูููุงุช</h3>
        <div id="instructions-content" style="text-align:right; line-height:1.6; font-size:0.9rem; margin:15px 0;"></div>
        <button class="btn" onclick="closeModal('instructions-modal')">ุญุณูุงู</button>
    </div>
</div>

<div id="receipt-modal" class="modal no-print">
    <div class="modal-content">
        <div class="receipt-box" id="receipt-content">
            <span class="receipt-logo">๐</span>
            <h3>ุฅูุตุงู ุนูููุฉ ูุงุฌุญุฉ</h3>
            <div style="border-bottom:1px dashed #ccc; margin:10px 0;"></div>
            <div class="receipt-row"><span>ููุน ุงูุนูููุฉ:</span><strong id="rec-type"></strong></div>
            <div class="receipt-row"><span>ุงููุจูุบ:</span><strong id="rec-amt"></strong></div>
            <div class="receipt-row"><span>ุงูุชุงุฑูุฎ:</span><span id="rec-date"></span></div>
            <div class="receipt-row"><span>ุงูุฑูู ุงููุฑุฌุนู:</span><span id="rec-ref"></span></div>
            <div class="receipt-watermark">AL-MAJED </div>
            <div style="margin-top:15px; font-size:0.8rem; color:#555;">ุดูุฑุงู ูุงุณุชุฎุฏุงููู ูุญูุธุฉ ุงููุงุฌุฏ</div>
        </div>
        <button class="btn" style="margin-bottom:10px; background: #333; color:#fff;" onclick="playSound('click'); saveReceiptImage()">๐ธ ุญูุธ ูุตูุฑุฉ</button>
        <button class="btn" style="margin-bottom:10px; background: var(--success); color:#000;" onclick="playSound('click'); shareReceipt()">๐ค ูุดุงุฑูุฉ ุงูุฅูุตุงู</button>
        <button class="btn" onclick="playSound('click'); closeModal('receipt-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="txn-details-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold); margin-top:0;">ุชูุงุตูู ุงูุนูููุฉ</h3>
        <div id="txn-details-body" style="text-align:right; margin:20px 0; line-height:1.8;"></div>
        <button class="btn" onclick="playSound('click'); closeModal('txn-details-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="admin-users-modal" class="modal no-print">
    <div class="modal-content" style="max-width: 450px;">
        <h3 style="color:var(--gold);">๐ฅ ุฏููู ุงูุนููุงุก ุงูุดุงูู</h3>
        <input type="text" id="admin-user-search" placeholder="ุจุญุซ ุจุงูุงุณู ุฃู ุงูุฑูู..." onkeyup="filterUserList()" style="margin-bottom:10px;">
        <div id="admin-users-list" style="max-height: 300px; overflow-y: auto; text-align: right; border: 1px solid #444; border-radius: 10px; padding: 5px;"></div>
        <button class="btn" style="background:#555; margin-top:10px;" onclick="playSound('click'); closeModal('admin-users-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="admin-stmt-modal" class="modal no-print">
    <div class="modal-content" style="max-width: 450px;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
             <h3 style="color:var(--gold); margin:0;">๐ ูุดู ุญุณุงุจ ุงูุนููู</h3>
             <button style="background:none; border:none; color:#fff; font-size:1.2rem;" onclick="playSound('click'); closeModal('admin-stmt-modal')">โ</button>
        </div>
        <div id="admin-stmt-container"></div>
    </div>
</div>

<div id="admin-live-chat-modal" class="modal no-print">
    <div class="modal-content" style="max-width:450px; height:80vh; display:flex; flex-direction:column;">
        <h3 style="color:var(--gold); margin-top:0;">๐ฌ ูุญุงุฏุซุฉ ุงูุนููู: <span id="admin-chat-target-name"></span></h3>
        <div id="admin-live-chat-box" class="chat-box" style="flex:1; background:rgba(0,0,0,0.4); margin-bottom:10px; text-align:right;"></div>
        <div class="chat-input-area">
            <input type="text" id="admin-live-chat-input" placeholder="ุงูุชุจ ุฑุฏู..." style="margin-bottom:0;">
            <button class="btn" onclick="sendAdminLiveChat()" style="width:auto; padding:0 20px;">โค</button>
        </div>
        <button class="btn" style="background:#555; margin-top:10px;" onclick="closeAdminLiveChat()">ุฅุบูุงู ุงูุดุงุช</button>
    </div>
</div>

<div id="custom-pin-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold); margin-top:0;">๐ ุชุฃููุฏ ุงูุนูููุฉ</h3>
        <p style="font-size:0.9rem; opacity:0.8; margin-bottom:20px;">ูุฑุฌู ุฅุฏุฎุงู ุฑูุฒ ุงูุญูุงูุฉ PIN ูููุชุงุจุนุฉ</p>
        <div style="position:relative;">
            <input type="password" id="custom-pin-input" placeholder="----" maxlength="6" inputmode="numeric" style="letter-spacing:5px; font-size:1.5rem; text-align:center;">
        </div>
        <button class="btn" id="custom-pin-confirm" onclick="playSound('click')">ุชุฃููุฏ</button>
        <button class="btn" style="background:none; color:#aaa; margin-top:10px;" onclick="playSound('click'); closeModal('custom-pin-modal')">ุฅูุบุงุก</button>
    </div>
</div>

<div id="force-pass-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">โ๏ธ ุชุญุฏูุซ ุฃููู ูุทููุจ</h3>
        <p style="font-size:0.8rem; opacity:0.8;">ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ ุบูุฑ ุขููุฉ.</p>
        <input type="password" id="new-forced-pass" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ">
        <input type="password" id="confirm-forced-pass" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ">
        <button class="btn" onclick="playSound('click'); submitForcedPass()">ุญูุธ ูุงูุฏุฎูู</button>
    </div>
</div>

<div id="pin-setup-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">๐ก๏ธ ุฅุนุฏุงุฏ ุฑูุฒ ุงูุญูุงูุฉ</h3>
        <p style="font-size:0.8rem; opacity:0.9; line-height:1.6;">ูุฃูุงู ุญุณุงุจูุ ูุฌุจ ุชุนููู <strong>ุฑูุฒ PIN</strong> ุฎุงุต ุจู.</p>
        <input type="password" id="setup-pin-val" placeholder="ุฑูุฒ (4-6 ุฃุฑูุงู)" maxlength="6" inputmode="numeric" style="font-size:1.2rem; letter-spacing:5px;">
        <button class="btn" onclick="playSound('click'); setupUserPin()">ุญูุธ ุงูุฑูุฒ ูุงูุฏุฎูู</button>
    </div>
</div>

<div id="reset-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">ูู ุงุฑุชุจุงุท ุงูุฌูุงุฒ</h3>
        <input type="text" id="reset-bank-name" placeholder="ุงุณูู ุงููุณุฌู">
        <input type="password" id="reset-pin-val" placeholder="ุฑูุฒ PIN ุงูุญุงูู" inputmode="numeric">
        <button class="btn" onclick="playSound('click'); submitResetRequest()">ุชุฃููุฏ ุงููููุฉ</button>
        <button class="btn" style="background:none; color:#999; margin-top:10px;" onclick="playSound('click'); closeModal('reset-modal')">ุฅูุบุงุก</button>
    </div>
</div>

<div id="qty-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold); margin-top:0;">ุชุญุฏูุฏ ุงููููุฉ</h3>
        <p id="qty-pkg-name" style="font-size:0.9rem; opacity:0.8; font-weight:bold; color:#fff;"></p>
        <input type="number" id="qty-input-field" value="1" min="1">
        
        <div style="margin: 10px 0; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 10px;">
            <small style="display:block; margin-bottom:5px; color:var(--gold);">ูู ูุฏูู ููุจูู ุฎุตูุ</small>
            <input type="text" id="coupon-val" placeholder="ุฃุฏุฎู ุงูููุฏ ููุง (ุงุฎุชูุงุฑู)" style="font-size:0.9rem; margin-bottom:5px;">
        </div>

        <button class="btn" id="confirm-qty-btn" onclick="playSound('click')">ุชุฃููุฏ ุงูุดุฑุงุก</button>
        <button class="btn" style="background:none; color:#999; margin-top:10px;" onclick="playSound('click'); closeModal('qty-modal')">ุฅูุบุงุก</button>
    </div>
</div>

<div id="voucher-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">๐ ุดุญู ูุฑุช ููุฑู</h3>
        <p style="font-size:0.85rem; opacity:0.7;">ุฃุฏุฎู ููุฏ ุงููุงูุชุดุฑ ููุชู ุดุญู ุงูุฑุตูุฏ ููุฑุงู</p>
        <input type="text" id="voucher-code-input" placeholder="VC-XXXXXXXXXX" style="font-family:monospace; font-size:1.1rem; letter-spacing:1px;">
        <button class="btn" onclick="playSound('click'); redeemVoucher()">ุดุญู ุงูุฑุตูุฏ</button>
        <button class="btn" style="background:none; color:#999; margin-top:10px;" onclick="playSound('click'); closeModal('voucher-modal')">ุฅูุบุงุก</button>
    </div>
</div>

<div id="codes-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--gold);">โ ุชู ุงูุดุฑุงุก ุจูุฌุงุญ</h3>
        <div id="codes-display" style="background:rgba(0,0,0,0.5); padding:15px; border-radius:15px; margin:15px 0; color:var(--gold); font-family:monospace; direction:ltr; white-space:pre-wrap; border:1px dashed var(--gold); max-height: 200px; overflow-y: auto;"></div>
        <button class="btn" onclick="playSound('click'); copyAndClose()">ูุณุฎ ุงูุฃููุงุฏ ูุฅุบูุงู</button>
    </div>
</div>

<div id="qr-modal" class="modal no-print">
    <div class="modal-content" style="background: #fff; color: #000; border: 4px solid var(--gold);">
        <h3 style="color: var(--main); margin-bottom: 5px;">QR Code ุงูุฎุงุต ุจู</h3>
        <p style="font-size: 0.8rem; color: #555; margin-bottom: 20px;">ุงูุณุญ ุงูููุฏ ูุชุญููู ุงูุฑุตูุฏ ุฅููู ุจุณูููุฉ</p>
        <div id="qr-container" style="margin: 20px auto; width: 200px; height: 200px; background: #eee;">
             <img id="my-qr-img" src="" alt="QR Code" style="width: 100%; height: 100%; object-fit: contain;">
        </div>
        <div style="font-weight: bold; font-size: 1.2rem; letter-spacing: 2px; margin-bottom: 20px;" id="qr-phone-display"></div>
        <button class="btn" onclick="playSound('click'); closeModal('qr-modal')">ุฅุบูุงู</button>
    </div>
</div>

<div id="flash-sale-modal" class="modal no-print">
    <div class="modal-content">
        <h3 style="color:var(--error);">โก ุชูุนูู ุนุฑุถ ุฎุงุทู</h3>
        <select id="flash-card-type" style="margin-bottom:10px;"></select>
        <input type="number" id="flash-discount" placeholder="ูุณุจุฉ ุงูุฎุตู (ูุซุงู: 0.20 ูู 20%)">
        <input type="number" id="flash-hours" placeholder="ูุฏุฉ ุงูุนุฑุถ ุจุงูุณุงุนุงุช">
        <button class="btn" style="background:var(--error); color:#fff;" onclick="submitFlashSale()">ุชูุนูู ุงูุนุฑุถ</button>
        <button class="btn" style="background:none; color:#aaa; margin-top:10px;" onclick="closeModal('flash-sale-modal')">ุฅูุบุงุก</button>
    </div>
</div>

<div id="admin-chat-manager" class="modal no-print">
    <div class="modal-content" style="max-width: 450px;">
        <h3 style="color:var(--gold);">๐ฌ ุฅุฏุงุฑุฉ ูุญุงุฏุซุงุช ุงูุนููุงุก</h3>
        <div id="admin-chat-list" style="max-height: 350px; overflow-y: auto; text-align: right;"></div>
        <button class="btn" style="margin-top:10px; background:#555;" onclick="closeModal('admin-chat-manager')">ุฅุบูุงู</button>
    </div>
</div>

<div class="app">
    <div id="page-auth">
        <div class="slider-container">
            <img id="auth-banner-img" class="auth-banner" src="img/1.jpg" alt="Banner">
            <button class="slider-btn prev-btn" onclick="manualSlide(-1)">&#10094;</button>
            <button class="slider-btn next-btn" onclick="manualSlide(1)">&#10095;</button>
        </div>
        
        <div style="text-align:center; padding: 0px 0; margin-top: 0px;"> 
            <img id="auth-logo-img" class="login-logo" src="" alt="Logo">
            <h1 style="color:var(--gold); font-size:2.8rem; margin:0; font-weight:900;">ูุญูุธุฉ ุงููุงุฌุฏ</h1>
            <p style="opacity:0.6; letter-spacing:3px; font-weight:600;"> V2.4</p>
        </div>
        
        <div class="card" style="padding: 0; padding-bottom: 20px;">
            <div class="admin-tabs" style="margin-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 0;">
                <button class="tab-btn active" id="tab-login" onclick="setAuthMode('login')" style="border-radius: 12px 12px 0 0; border-bottom: none;">ุชุณุฌูู ุงูุฏุฎูู</button>
                <button class="tab-btn" id="tab-register" onclick="setAuthMode('register')" style="border-radius: 12px 12px 0 0; border-bottom: none;">ุญุณุงุจ ุฌุฏูุฏ</button>
            </div>
            
            <div style="padding: 0 20px;">
                <input type="text" id="auth-user" placeholder="ุฑูู ุงููุงุชู" inputmode="numeric" oninput="formatPhoneInput(this)">
                
                <div class="pass-wrapper">
                    <input type="password" id="auth-pass" placeholder="ูููุฉ ุงููุฑูุฑ">
                    <span class="eye-icon" onclick="togglePass('auth-pass')">๐๏ธ</span>
                </div>

                <div id="reg-fields" class="hidden">
                   <div class="pass-wrapper">
                       <input type="password" id="auth-pass-confirm" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ">
                   </div>
                   <input type="text" id="auth-bank" placeholder="ุงูุงุณู ุงูุฑุจุงุนู (ููุง ูู ุงูุจุทุงูุฉ/ุงูุจูู)">
                   <div id="reg-ref-container">
                       <input type="text" id="auth-ref-code" placeholder="ููุฏ ุงูุฅุญุงูุฉ (ุงุฎุชูุงุฑู)">
                   </div>
                </div>

                <div class="auth-options" id="login-options">
                    <div class="checkbox-container" onclick="playSound('click'); toggleRemember()">
                        <div class="checkbox-custom checked" id="check-remember"></div>
                        <span>ุชุฐูุฑูู</span>
                    </div>
                </div>

                <button class="btn" onclick="playSound('click'); handleAuth()" id="btn-auth-main">ุชุณุฌูู ุงูุฏุฎูู</button>
                
                <div id="bio-login-btn" class="bio-btn hidden" onclick="biometricLogin()" title="ุชุณุฌูู ุฏุฎูู ุณุฑูุน">๐</div>
                
                <div style="display:flex; justify-content:center; margin-top:15px;">
                    <button class="btn" style="background:rgba(255,255,255,0.1); border:none; color:#ccc; font-size:0.9rem;" onclick="playSound('click'); loginGuest()" id="btn-guest">๐ ุฏุฎูู ุฒุงุฆุฑ (ููุชุตูุญ ููุท)</button>
                </div>
                
                <div id="locked-box" class="hidden" style="margin-top:20px; text-align:center; padding:15px; border:1px solid var(--error); border-radius:15px; background:rgba(255,75,43,0.1);">
                    <p style="color:var(--error); font-size:0.85rem; font-weight:bold;">ุนุฐุฑุงู.. ุงูุญุณุงุจ ูุฑุชุจุท ุจุฌูุงุฒ ุขุฎุฑ!</p>
                    <button class="btn" style="background:var(--error); color:#fff; font-size:0.8rem;" onclick="playSound('click'); openResetModal()">ูู ุงูุงุฑุชุจุงุท</button>
                </div>
            </div>
        </div>
    </div>

    <div id="page-main" class="hidden">
        <div class="bal-box client-item no-print" onclick="playSound('click'); vibrate(); toggleBalVisibility()">
            <div style="position: absolute; top: 10px; right: 10px; width: 40px; height: 40px;">
                <img id="hero-img" src="" style="width:100%; height:100%; object-fit:contain; display:none;">
            </div>
            <small id="user-display" style="opacity:0.8; font-weight:bold;"></small>
            <div class="bal-val" id="bal-display" dir="ltr">****</div>
            <small id="bal-label" class="bal-hint">ุงููุฑ ูุฅุธูุงุฑ ุงูุฑุตูุฏ</small>
        </div>

        <div id="sec-account" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            
            <div class="card" style="text-align: center; padding: 20px; background: linear-gradient(to right, var(--main), var(--accent-gradient)); border: 1px solid var(--gold);">
                <h2 style="margin:0; color:var(--gold); font-weight:900;">ูุญูุธุฉ ุงููุงุฌุฏ</h2>
                <p style="margin:0; opacity:0.8; font-family:monospace; font-weight:bold; letter-spacing:1px;"> V2.4</p>
            </div>

            <div class="card" style="text-align: center; padding: 15px;" onclick="playSound('click'); showMyQR()">
                <div style="font-size: 2.5rem;">๐ฑ</div>
                <div style="font-weight: bold; margin-top: 5px;">ุฑูุฒ QR ุงูุฎุงุต ุจู</div>
                <small style="opacity: 0.7;">ุงุนุฑุถ ุงูููุฏ ูุงุณุชูุงู ุงูุฃููุงู</small>
            </div>
            
            <div id="ref-card-container" class="card" style="padding:15px; display:none;">
                <h3 style="text-align:center; color:var(--gold);">๐ ููุฏ ุงูุฅุญุงูุฉ ุงูุฎุงุต ุจู</h3>
                <div id="my-ref-code-display" style="background:rgba(0,0,0,0.4); padding:10px; text-align:center; font-family:monospace; font-size:1.2rem; border:1px dashed var(--gold); border-radius:10px; margin-bottom:10px;">ุฌุงุฑู ุงูุชุญููู...</div>
                <button class="btn" style="width: auto; margin: 0 auto; display: block; font-size: 0.8rem; padding: 8px 20px;" onclick="copyRefCode()">๐ ูุณุฎ ุงูููุฏ</button>
                <small style="display:block; text-align:center; opacity:0.7; margin-top: 10px;">ุดุงุฑู ุงูููุฏ ูุงุฑุจุญ ููุงูุขุช ุนูุฏ ุชุณุฌูู ุฃุตุฏูุงุฆู</small>
            </div>

            <div class="card">
                <h3 style="text-align:center; color:var(--gold);">๐จ ุชุฎุตูุต ุงููุธูุฑ</h3>
                <div class="theme-grid">
                    <button class="theme-btn" style="background:#f9d976;" onclick="playSound('click'); setTheme('default')"></button>
                    <button class="theme-btn" style="background:#76c7f9;" onclick="playSound('click'); setTheme('blue')"></button>
                    <button class="theme-btn" style="background:#f97676;" onclick="playSound('click'); setTheme('red')"></button>
                    <button class="theme-btn" style="background:#d976f9;" onclick="playSound('click'); setTheme('purple')"></button>
                     <button class="theme-btn" style="background:#d4a373;" onclick="playSound('click'); setTheme('copper')"></button>
                    <button class="theme-btn" style="background:#4cc9f0;" onclick="playSound('click'); setTheme('sapphire')"></button>
                    <button class="theme-btn" style="background:#2ec4b6;" onclick="playSound('click'); setTheme('emerald')"></button>
                    <button class="theme-btn" style="background:#8d99ae;" onclick="playSound('click'); setTheme('slate')"></button>
                    <button class="theme-btn" style="background:#9d4edd;" onclick="playSound('click'); setTheme('orchid')"></button>
                    <button class="theme-btn" style="background:#e0e1dd;" onclick="playSound('click'); setTheme('carbon')"></button>
                    <button class="theme-btn" style="background:#ff4d6d;" onclick="playSound('click'); setTheme('maroon')"></button>
                    <button class="theme-btn" style="background:#ffffff; border: 1px solid #333;" onclick="playSound('click'); setTheme('black')"></button>
                </div>
            </div>

            <div class="card">
                <h3 style="text-align:center; color:var(--gold);">ุฅุนุฏุงุฏุงุช ุงูุฃูุงู</h3>
                
                <label style="font-size:0.75rem; color:var(--gold); display:block; margin-bottom:5px;">ุงูุงุณู ุงููุนุชูุฏ:</label>
                <input type="text" id="acc-bank" disabled>
                
                <h4 style="margin:15px 0 10px; color:#fff; font-size:0.9rem;">ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</h4>
                <div class="pass-wrapper">
                    <input type="password" id="acc-new-pass" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" disabled>
                </div>
                <div class="pass-wrapper">
                    <input type="password" id="acc-new-pass-confirm" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ" disabled>
                </div>
                
                <h4 style="margin:15px 0 10px; color:#fff; font-size:0.9rem;">ุชุบููุฑ ุฑูุฒ PIN</h4>
                <input type="password" id="acc-new-pin" placeholder="ุฑูุฒ PIN ุงูุฌุฏูุฏ (4-6 ุฃุฑูุงู)" maxlength="6" inputmode="numeric" disabled>

                <button class="btn" id="btn-profile-action" onclick="playSound('click'); toggleEditProfile()">ุชุนุฏูู ุงูุจูุงูุงุช</button>
            </div>
            
             <div class="card">
                <h3 style="text-align:center; color:var(--gold);">๐ ุฅุนุฏุงุฏุงุช ุงูุตูุช</h3>
                <div class="sound-toggle-btn" onclick="toggleAppSounds()">
                    <span>ุชูุนูู ุงููุคุซุฑุงุช ุงูุตูุชูุฉ</span>
                    <div class="checkbox-custom checked" id="sound-checkbox"></div>
                </div>
            </div>
        </div>

        <div id="sec-dashboard" class="sec client-item">
            <div class="dashboard-grid">
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('store')">
                    <div>๐</div>
                    <span>ูุชุฌุฑ ุงูุจุงูุงุช</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('mycards'); loadMyCards()">
                    <div>๐ณ</div>
                    <span>ุณุฌู ูุฑูุชู</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('topup'); loadLogs()">
                    <div>โ</div>
                    <span>ุดุญู ุงูุฑุตูุฏ</span>
                </div>
                 <div class="dash-card client-item" onclick="playSound('click'); vibrate(); document.getElementById('voucher-modal').style.display='flex'">
                    <div>๐๏ธ</div>
                    <span>ุดุญู ูุงูุชุดุฑ</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('loans'); loadLoans()">
                    <div>๐ฐ</div>
                    <span>ุฎุฏูุฉ ุณูููู</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('transfer')">
                    <div>๐ธ</div>
                    <span>ุชุญููู ุฑุตูุฏ</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('wheel'); loadWheel()">
                    <div>๐ก</div>
                    <span>ุนุฌูุฉ ุงูุญุธ</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('statement'); loadStatement()">
                    <div>๐</div>
                    <span>ูุดู ุงูุญุณุงุจ</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); switchSec('tickets'); loadTickets()">
                    <div>๐ซ</div>
                    <span>ุงูุฏุนู ุงูููู</span>
                </div>
                <div class="dash-card client-item" onclick="playSound('click'); vibrate(); showInstructionsModal()">
                    <div>๐</div>
                    <span>ุงูุชุนูููุงุช</span>
                </div>
            </div>
        </div>
        
        <div id="sec-loans" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div class="card" style="text-align:center; padding:20px;">
                <h2 style="color:var(--gold);">๐ฐ ุฎุฏูุฉ ุณูููู ููุทูุงุฑุฆ</h2>
                <p style="opacity:0.8;">ุงุญุตู ุนูู ุฑุตูุฏ ููุฑู ูุณุฏุฏู ูุงุญูุงู ุนูุฏ ุงูุดุญู.</p>
                <div id="loan-status-area" style="margin:20px 0;">
                    <div class="skeleton" style="height:100px;"></div>
                </div>
                <button class="btn" onclick="requestLoan()" id="btn-req-loan">ุทูุจ ุณููุฉ ููุฑูุฉ</button>
            </div>
            <div class="card">
                <div class="stmt-header">
                      <h4 style="font-size:0.9rem; margin:0;">ุณุฌู ุงูุณูู</h4>
                      <select id="loan-month-selector" class="month-select" onchange="loadLoanHistory(this.value)"></select>
                </div>
                <div id="loan-history-list" style="max-height:200px; overflow-y:auto;"></div>
            </div>
        </div>

        <div id="sec-wheel" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div style="text-align:center;">
                <h3 style="color:var(--gold);">๐ก ุนุฌูุฉ ุงูุญุธ ุงูููููุฉ</h3>
                <p>ุฌุฑุจ ุญุธู ูุงุฑุจุญ ุฑุตูุฏ ูุฌุงูู ูู 24 ุณุงุนุฉ!</p>
                
                <div class="wheel-container" id="wheel-obj">
                      <div class="wheel-pointer"></div>
                      <div class="wheel-btn" onclick="playSound('click'); spinWheel()">SPIN</div>
                </div>
                <div id="wheel-result" style="font-weight:bold; font-size:1.2rem; margin-top:15px; min-height:30px;"></div>
            </div>
        </div>

        <div id="sec-tickets" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div class="card">
                <h3 style="color:var(--gold); text-align:center;">๐ซ ูุชุญ ุชุฐูุฑุฉ ุฌุฏูุฏุฉ</h3>
                <input type="text" id="ticket-title" placeholder="ุนููุงู ุงููุดููุฉ">
                <textarea id="ticket-msg" rows="4" placeholder="ุชูุงุตูู ุงููุดููุฉ..."></textarea>
                <button class="btn" onclick="playSound('click'); createTicket()">ุฅุฑุณุงู ุงูุชุฐูุฑุฉ</button>
            </div>
            
            <div class="stmt-header">
                 <h4 style="margin:15px 0;">ุชุฐุงูุฑู ุงูุณุงุจูุฉ:</h4>
                 <select id="ticket-month-selector" class="month-select" onchange="loadTickets(this.value)"></select>
            </div>
            <div id="tickets-list"></div>
        </div>

        <div id="sec-chat" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div class="chat-container">
                <div id="chat-box" class="chat-box"></div>
                
                <div id="file-preview-area" class="chat-file-preview">
                    <span id="file-name-preview" style="font-size:0.8rem;"></span>
                    <button onclick="clearFileSelection()" style="background:none; border:none; color:var(--error);">โ</button>
                </div>

                <div class="chat-input-area">
                    <button class="file-attach-btn" onclick="document.getElementById('chat-file-input').click()">๐</button>
                    <input type="text" id="chat-input" placeholder="ุงูุชุจ ุฑุณุงูุชู ููุง..." style="margin-bottom:0;">
                    <button class="btn" onclick="playSound('click'); vibrate(); sendChat()" style="width:auto; padding:0 20px;">โค</button>
                </div>
            </div>
        </div>

        <div id="sec-statement" class="sec hidden client-item">
            <button class="back-btn no-print" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div class="card">
                <div class="stmt-header no-print">
                    <h3 style="color:var(--gold); margin:0;">ูุดู ุงูุญุณุงุจ</h3>
                    <select id="stmt-month-selector" class="month-select" onchange="renderStatement(this.value, false)"></select>
                </div>
                
                <button class="btn no-print" onclick="loadMonthlyReport()" style="margin-bottom:15px; background:#222; border:1px solid var(--gold); color:var(--gold);">๐ ุนุฑุถ ุงูุชุญููู ุงููุงูู ุงูุดูุฑู</button>

                <div class="no-print" style="margin-bottom:15px; display:flex;">
                      <button class="excel-btn" onclick="playSound('click'); vibrate(); exportToExcel()">๐ ุชุตุฏูุฑ Excel</button>
                      <button class="btn" style="background:#555; font-size:0.8rem; padding:10px; flex:1;" onclick="playSound('click'); printStatement()">๐จ๏ธ ุทุจุงุนุฉ / PDF</button>
                </div>

                <div id="finance-chart" class="chart-container no-print">
                    <div id="bar-in" class="chart-bar-in" style="width:50%"></div>
                    <div id="bar-out" class="chart-bar-out" style="width:50%"></div>
                </div>

                <div class="stmt-summary-box">
                    <div class="stmt-item">
                        <small>ูุงุฑุฏ (ููุดูุฑ)</small>
                        <span class="val-in" id="total-in" dir="ltr">0</span>
                    </div>
                    <div class="stmt-item">
                        <small>ุตุงุฏุฑ (ููุดูุฑ)</small>
                        <span class="val-out" id="total-out" dir="ltr">0</span>
                    </div>
                    <div class="stmt-item">
                        <small>ุงูุฑุตูุฏ ุงูุญุงูู</small>
                        <span class="val-rem" id="total-rem" dir="ltr">0</span>
                    </div>
                </div>

                <div style="overflow-x:auto;">
                    <table class="stmt-table">
                        <thead>
                            <tr>
                                <th>ุงูุชุงุฑูุฎ</th>
                                <th>ุงูุจูุงู</th>
                                <th>ุงููุจูุบ</th>
                            </tr>
                        </thead>
                        <tbody id="statement-body"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="sec-store" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            
            <div id="flash-sale-banner" style="display:none; background: linear-gradient(45deg, #ff0000, #ff4b2b); padding: 10px; border-radius: 15px; margin-bottom: 15px; text-align: center; animation: pulse 2s infinite;">
                 <h3 style="margin:0; color: #fff;">โก ุนุฑูุถ ุฎุงุทูุฉ โก</h3>
                 <p style="margin:5px 0 0; font-size: 0.8rem;">ุชุฎููุถุงุช ููุชุฑุฉ ูุญุฏูุฏุฉ!</p>
            </div>
            
            <div style="display:flex; gap:10px; margin-bottom:15px;">
                <input type="text" id="store-search" placeholder="๐ ุจุญุซ ุนู ูุฑุช..." onkeyup="filterStore()" style="margin-bottom:0; border-radius:15px;">
                <button onclick="playSound('click'); toggleFavFilter(this)" style="background:var(--card-bg); border:1px solid var(--gold); color:#555; border-radius:15px; width:50px; font-size:1.5rem; cursor:pointer;" id="fav-filter-btn">โ</button>
            </div>
            
            <div id="cards-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;"></div>
        </div>

        <div id="sec-transfer" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            <div class="card">
                <h3 style="text-align:center; color:var(--gold);">ุชุญููู ุฑุตูุฏ ุงูู ุญุณุงุจ ุขุฎุฑ</h3>
                <input type="text" id="tr-id" placeholder="ุฑูู ูุงุชู ุงููุณุชูู" inputmode="numeric" oninput="formatPhoneInput(this)">
                <input type="text" id="tr-amt" placeholder="ุงููุจูุบ ุงููุฑุงุฏ ุชุญูููู" inputmode="numeric">
                <button class="btn" onclick="playSound('click'); transferMoney()">ุฅุฑุณุงู ุงูุฑุตูุฏ ุงูุขู</button>
            </div>
            <div class="card">
                <div class="stmt-header">
                      <h4 style="font-size:0.9rem; margin:0;">ุณุฌู ุงูุชุญูููุงุช</h4>
                      <select id="transfer-month-selector" class="month-select" onchange="filterTransferLogs(this.value)"></select>
                </div>
                <input type="text" id="transfer-search-input" placeholder="๐ ุจุญุซ ูู ุงูุณุฌู..." onkeyup="filterTransferLogsByText()" style="font-size:0.8rem; padding:8px; margin-bottom:10px;">
                <div style="border-bottom:1px solid var(--gold); margin-bottom:10px; opacity:0.5;"></div>
                <div id="transfer-logs-list" style="max-height:200px; overflow-y:auto;"></div>
            </div>
        </div>

        <div id="sec-mycards" class="sec hidden client-item">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')" style="margin-bottom:0;">๐ ุงูุนูุฏุฉ</button>
                <button onclick="playSound('click'); vibrate(); copyAllCardsVertical()" style="background:var(--success); color:#000; border:none; padding:10px 15px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:0.8rem;">๐ ูุณุฎ ุงููู</button>
            </div>
            <select id="mycards-month-selector" class="month-select" style="width:100%; margin-bottom:15px;" onchange="filterMyCards(this.value)"></select>
            <div id="my-cards-list"></div>
        </div>

        <div id="sec-topup" class="sec hidden client-item">
            <button class="back-btn" onclick="playSound('click'); switchSec('dashboard')">๐ ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</button>
            
            <div class="card" style="background: linear-gradient(135deg, #9419e0 100%); border: none;">
                <h4 style="margin: 0; color: #fff; font-size: 1rem; text-align: center;" id="bank-name-title">ุฌุงุฑู ุงูุชุญููู...</h4>
                <small style="opacity: 0.8; font-size: 0.75rem; text-align: center; display: block;">ุญุณุงุจ ุงูุฅูุฏุงุน ุงููุนุชูุฏ</small>
                <div style="margin-top: 5px; background: rgba(255,255,255,0.15); padding: 5px; border-radius: 15px; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 10px;">
                    <strong style="font-size: 1.5rem; letter-spacing: 2px; text-align: center;" id="bank-acc-num">...</strong>
                    <button onclick="playSound('click'); copyBankAcc()" style="background: #fff; border: none; padding: 6px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; color: #000;">ูุณุฎ ุงูุฑูู</button>
                </div>
            </div>

            <div class="card">
                <h3 style="text-align:center; color:var(--gold); margin-top:0;">ุฅุดุนุงุฑ ุชุญููู</h3>
                
                <div style="background: rgba(0,0,0,0.2); padding: 12px; border-radius: 15px; border: 1px dashed var(--gold); margin-bottom: 15px; text-align: center;">
                    <small style="display: block; opacity: 0.7;">ุงูุงุณู ุงููุณุฌู ูุฏููุง:</small>
                    <strong id="display-payment-name" style="color: var(--gold); font-size: 1rem;">ุฌุงุฑู ุงูุชุญููู...</strong>
                </div>

                <input type="number" id="top-amt" placeholder="ุงุฏุฎู ุงููุจูุบ ุงูุฐู ุญููุชู ุจุงูุถุจุท" style="font-size: 1.1rem; font-weight: bold; border-color: var(--gold);">
                <input type="text" id="top-ref" placeholder="ุงุณู ุงููุญูู (ุซูุงุซู)" class="hidden">
                
                <button class="btn" id="btn-topup-main" onclick="playSound('click'); confirmTopupRequest()" style="background: var(--kuraimi); color:#fff;">
                    ๐ ุฅุฑุณุงู ุงูุทูุจ
                </button>
                
                <div onclick="document.getElementById('top-ref').classList.toggle('hidden'); showT('ุงูุชุนุฏูู ุงููุฏูู ููุนู')" style="text-align: center; color: #aaa; font-size: 0.75rem; margin-top: 12px; cursor: pointer; text-decoration: underline;">[ ุชุนุฏูู ุงูุงุณู ูุฏููุงู ]</div>
            </div>

            <div style="display:flex; justify-content:space-between; align-items:center; margin:15px 0;">
                <h4 style="margin:0; color:var(--gold); font-size:0.9rem;">๐ ุณุฌู ุงูุดุญู:</h4>
                <select id="topup-month-selector" class="month-select" style="margin:0; width:auto;" onchange="filterTopupLogs(this.value)"></select>
            </div>
            <input type="text" id="topup-search-input" placeholder="๐ ุจุญุซ ูู ุงูุณุฌู..." onkeyup="filterTopupLogsByText()" style="font-size:0.8rem; padding:8px; margin-bottom:10px;">
            <div id="logs-list"></div>
        </div>

        <div id="sec-admin" class="sec hidden">
            <button class="back-btn" id="admin-back-btn" onclick="playSound('click'); handleAdminBack()">๐ ุงูุนูุฏุฉ</button>
            
            <div id="admin-home-grid" class="dashboard-grid">
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('req', this)">
                    <div>๐</div>
                    <span>ุงูุทูุจุงุช</span>
                </div>
                 <div class="dash-card" onclick="playSound('click'); switchAdminTab('users', this)">
                    <div>๐ฅ</div>
                    <span>ุงูุนููุงุก</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('inv', this)">
                    <div>๐ฆ</div>
                    <span>ุงููุฎุฒู</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('vouchers', this); loadAdminVouchers()">
                    <div>๐๏ธ</div>
                    <span>ุงููุงูุชุดุฑ</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('coupons', this); loadAdminCoupons()">
                    <div>๐ท๏ธ</div>
                    <span>ุงูููุจููุงุช</span>
                </div>
                 <div class="dash-card" onclick="playSound('click'); switchAdminTab('flash', this); loadAdminFlashSales()">
                    <div>โก</div>
                    <span>ุงูุนุฑูุถ</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('loans', this); loadAdminLoans(true, 'all')">
                    <div>๐ฐ</div>
                    <span>ุงูุฏููู</span>
                </div>
                 <div class="dash-card" onclick="playSound('click'); switchAdminTab('tickets', this); loadAdminTickets()">
                    <div>๐ซ</div>
                    <span>ุงูุฏุนู</span>
                </div>
                 <div class="dash-card" onclick="playSound('click'); switchAdminTab('chat', this); loadAdminChatList()">
                    <div>๐ฌ</div>
                    <span>ุงูุดุงุช</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('inst', this); document.getElementById('admin-inst-text').value = globalInstructions;">
                    <div>๐</div>
                    <span>ุงูุชุนูููุงุช</span>
                </div>
                <div class="dash-card" onclick="playSound('click'); switchAdminTab('set', this); loadSettings()">
                    <div>โ๏ธ</div>
                    <span>ุงูุฅุนุฏุงุฏุงุช</span>
                </div>
            </div>

            <div class="admin-tabs hidden" id="admin-nav-tabs">
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('req', this)">ุงูุทูุจุงุช</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('users', this)">ุงูุนููุงุก</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('inv', this)">ุงููุฎุฒู</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('vouchers', this); loadAdminVouchers()">ุงููุงูุชุดุฑ</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('coupons', this); loadAdminCoupons()">ุงูููุจููุงุช</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('flash', this); loadAdminFlashSales()">ุงูุนุฑูุถ</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('loans', this); loadAdminLoans(true, 'all')">ุงูุฏููู</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('tickets', this); loadAdminTickets()">ุงูุฏุนู</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('chat', this); loadAdminChatList()">ุงูุดุงุช</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('inst', this); document.getElementById('admin-inst-text').value = globalInstructions;">ุงูุชุนูููุงุช</button>
                <button class="tab-btn" onclick="playSound('click'); switchAdminTab('set', this); loadSettings()">ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
            
            <div id="admin-req" class="admin-sec hidden">
                <div id="admin-stats-container"></div>
                <div id="admin-pending-list"></div>
            </div>
            
            <div id="admin-chat" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <h3 style="text-align:center; color:var(--gold);">๐ฌ ุฅุฏุงุฑุฉ ุงููุญุงุฏุซุงุช</h3>
                    <button class="btn" onclick="loadAdminChatList()" style="margin-bottom:15px;">ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
                    <div id="admin-chat-users-list"></div>
                </div>
            </div>

            <div id="admin-users" class="admin-sec hidden">
                <div class="card" style="padding:15px; background:rgba(0,0,0,0.3);">
                    <button class="btn" style="background:#555; color:#fff; margin-bottom:15px;" onclick="playSound('click'); openAdminUsersModal()">๐ฅ ุฏููู ุงูุนููุงุก ุงูุดุงูู</button>
                    
                    <input type="text" id="adm-search-id" placeholder="ุฑูู ุงููุงุชู ููุจุญุซ ุงููุฏูู">
                    <button class="btn" onclick="playSound('click'); searchUser()">ุจุญุซ</button>
                    
                    <div id="user-tools" class="hidden" style="margin-top:15px; border-top:1px solid #444; padding-top:15px;">
                        <div id="user-info-box" style="margin-bottom:10px; font-size:0.9rem; color:var(--gold); line-height:1.6;"></div>
                        <input type="number" id="adm-action-amt" placeholder="ุงููุจูุบ">
                        <div style="display:flex; gap:8px;">
                           <button class="btn" style="background:var(--success); color:#000;" onclick="playSound('click'); adminForceAction('topup')">ุดุญู</button>
                           <button class="btn" style="background:var(--error); color:#fff;" onclick="playSound('click'); adminForceAction('withdraw')">ุณุญุจ</button>
                        </div>
                        <div style="display:flex; gap:8px; margin-top:10px;">
                            <button class="btn" style="background:var(--gold); color:#000;" onclick="playSound('click'); loadAdminUserStatement()">๐ ุนุฑุถ ูุดู ุงูุญุณุงุจ</button>
                            <button class="btn" style="background:#555; color:#fff;" onclick="playSound('click'); startImpersonation()">๐ค ุชููุต</button>
                        </div>
                        <div style="display:flex; gap:8px; margin-top:10px;">
                            <button class="btn" style="background:#000; border:1px solid var(--error); color:var(--error);" onclick="manageBan('ban')">โ ุญุธุฑ</button>
                            <button class="btn" style="background:#000; border:1px solid var(--success); color:var(--success);" onclick="manageBan('unban')">โ ูู ุงูุญุธุฑ</button>
                        </div>
                        
                        <button class="btn" style="background:var(--main); border:1px solid var(--gold); color:#fff; margin-top:10px;" onclick="playSound('click'); openAdminInternalChat(document.getElementById('adm-search-id').value, document.getElementById('user-info-box').innerText.split('\n')[0])">๐ฌ ูุชุญ ุดุงุช ูุจุงุดุฑ</button>
                        
                        <button class="btn" style="background:#ff0000; color:#fff; margin-top:10px; font-size:0.9rem;" onclick="playSound('click'); adminDeleteUser()">๐๏ธ ุญุฐู ุงูุญุณุงุจ ููู ูุง ูุชุนูู ุจู ููุงุฆูุงู</button>

                        <select id="adm-set-rank" style="margin-top:10px;" onchange="updateUserRank(this.value)">
                            <option value="ุนุงุฏู">ุชุฑููุฉ ุฅูู ุนููู ุนุงุฏู</option>
                            <option value="ููุฒุน">ุชุฑููุฉ ุฅูู ููุฒุน</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="admin-inv" class="admin-sec hidden">
                <select id="stock-type-select"></select>
                <textarea id="stock-input" rows="6" placeholder="ุงูุตู ุงูุฃููุงุฏ ููุง.. ููุฏ ูู ูู ุณุทุฑ"></textarea>
                <div style="display:flex; gap:10px;">
                      <button class="btn" onclick="playSound('click'); submitNewStock()">ุฅุถุงูุฉ ูููุฎุฒู</button>
                      <button class="btn" style="background:var(--gold); color:#000;" onclick="playSound('click'); previewStockCurrent()">๐๏ธ ูุนุงููุฉ</button>
                </div>
            </div>

            <div id="admin-vouchers" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <h3 style="text-align:center; color:var(--gold);">๐ซ ุฅุฏุงุฑุฉ ุงููุงูุชุดุฑุงุช</h3>
                    <input type="number" id="gen-v-qty" placeholder="ุงูุนุฏุฏ (ูุซูุงู 10)">
                    <input type="number" id="gen-v-val" placeholder="ุงููููุฉ (ูุซูุงู 500)">
                    <div style="display:flex; gap:5px; margin-bottom:10px;">
                        <button class="btn" onclick="playSound('click'); adminGenerateVouchers()">ุชูููุฏ</button>
                        <button class="btn" style="background:#555; color:#fff;" onclick="printGridVouchers()">๐จ๏ธ ุทุจุงุนุฉ ุงูุดุจูุฉ</button>
                    </div>
                    <div id="gen-v-output-container" class="hidden">
                         <div id="gen-v-output" style="margin-top:10px; font-family:monospace; background:#222; padding:10px; white-space:pre-wrap; max-height:150px; overflow-y:auto; direction:ltr;"></div>
                         <button class="btn" style="margin-top:10px; background:var(--success); color:#000;" onclick="copyVerticalGeneratedVouchers()">๐ ูุณุฎ ุนููุฏู</button>
                    </div>
                    
                    <div style="margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
                        <h4 style="margin:0 0 10px;">ุฅุญุตุงุฆูุงุช ุงููุงูุชุดุฑ</h4>
                         <select id="voucher-stats-month" class="month-select" style="margin-bottom:10px;" onchange="getVoucherStats()">
                             <option value="all">ูู ุงูุฃููุงุช</option>
                             <option value="0">ููุงูุฑ</option><option value="1">ูุจุฑุงูุฑ</option><option value="2">ูุงุฑุณ</option>
                             <option value="3">ุฃุจุฑูู</option><option value="4">ูุงูู</option><option value="5">ููููู</option>
                             <option value="6">ููููู</option><option value="7">ุฃุบุณุทุณ</option><option value="8">ุณุจุชูุจุฑ</option>
                             <option value="9">ุฃูุชูุจุฑ</option><option value="10">ููููุจุฑ</option><option value="11">ุฏูุณูุจุฑ</option>
                         </select>
                         <div id="voucher-stats-display" style="font-size:0.85rem; line-height:1.8;"></div>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <h4 style="color:var(--gold); margin:0;">ุณุฌู ุงููุงูุชุดุฑุงุช</h4>
                    <button onclick="playSound('click'); copyAdminListVertical('vouchers')" style="background:var(--success); color:#000; border:none; padding:8px 15px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:0.8rem;">๐ ูุณุฎ ุงููู ุนููุฏู</button>
                </div>
                <input type="text" id="admin-vouchers-search" placeholder="๐ ุจุญุซ..." onkeyup="filterAdminList('vouchers')" style="font-size:0.8rem; padding:8px; margin-bottom:10px;">
                <div id="admin-vouchers-list"></div>
            </div>

            <div id="admin-coupons" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <h3 style="text-align:center; color:var(--success);">๐ท๏ธ ุฅุฏุงุฑุฉ ุงูููุจููุงุช</h3>
                    <input type="text" id="cpn-code" placeholder="ุงูุฑูุฒ (OFF50)">
                    <input type="number" id="cpn-disc" placeholder="ุงูุฎุตู (0.05 = 5%)">
                    <input type="number" id="cpn-max" placeholder="ุฃูุตู ุนุฏุฏ">
                    <div style="display:flex; gap:5px; margin-bottom:10px;">
                         <button class="btn" style="background:var(--success); color:#000;" onclick="playSound('click'); adminAddCoupon()">ุฅุถุงูุฉ</button>
                         <button class="btn" style="background:#555; color:#fff;" onclick="printCoupons()">๐จ๏ธ ุทุจุงุนุฉ</button>
                    </div>
                    
                     <div style="margin-top:15px; border-top:1px solid rgba(255,255,255,0.1); padding-top:10px;">
                        <button class="btn" style="font-size:0.8rem; padding:8px;" onclick="getCouponStats()">ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช</button>
                        <div id="coupon-stats-display" style="font-size:0.85rem; margin-top:10px;"></div>
                    </div>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                     <h4 style="color:var(--success); margin:0;">ูุงุฆูุฉ ุงูููุจููุงุช</h4>
                     <button onclick="playSound('click'); copyAdminListVertical('coupons')" style="background:var(--gold); color:#000; border:none; padding:8px 15px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:0.8rem;">๐ ูุณุฎ ุงููู</button>
                </div>
                 <div id="admin-coupons-list"></div>
            </div>

            <div id="admin-flash" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                      <h3 style="text-align:center; color:#ff4b2b;">โก ุงูุนุฑูุถ ุงูุฎุงุทูุฉ</h3>
                      <button class="btn" style="background:#ff4b2b; color:#fff;" onclick="openFlashSaleModal()">ุฅุถุงูุฉ ุนุฑุถ ุฌุฏูุฏ</button>
                      <button class="btn" style="background:none; border:1px solid #ff4b2b; color:#ff4b2b; margin-top:10px;" onclick="loadAdminFlashSales()">๐๏ธ ุชุญุฏูุซ ุงููุงุฆูุฉ</button>
                </div>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                     <h4 style="color:#ff4b2b; margin:0;">ุงูุนุฑูุถ ุงููุดุทุฉ</h4>
                     <button onclick="playSound('click'); copyAdminListVertical('flash')" style="background:var(--gold); color:#000; border:none; padding:8px 15px; border-radius:12px; font-weight:bold; cursor:pointer; font-size:0.8rem;">๐ ูุณุฎ ุงููู</button>
                </div>
                <div id="active-flash-list" style="margin-top:15px;"></div>
            </div>

            <div id="admin-loans" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3 style="color:var(--gold); text-align:center; margin-top:0;">๐ฐ ุงูุฏููู</h3>
                        <button onclick="loadAdminLoans(false, 'all')" style="background:none; border:1px solid #aaa; color:#aaa; font-size:0.7rem; padding:5px; border-radius:5px;">ุนุฑุถ ุงูุฃุฑุดูู</button>
                    </div>
                    <div id="admin-loans-list"></div>
                </div>
            </div>

            <div id="admin-tickets" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <h3 style="color:var(--gold); text-align:center; margin-top:0;">๐ซ ุชุฐุงูุฑ ุงูุฏุนู ุงูููู</h3>
                    <div class="stmt-header">
                        <small>ููุชุฑ ุงูุดูุฑ:</small>
                        <select id="admin-ticket-month-selector" class="month-select" onchange="loadAdminTickets(this.value)"></select>
                    </div>
                    <div id="admin-tickets-list"></div>
                </div>
            </div>

            <div id="admin-inst" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <h3 style="color:var(--gold); text-align:center;">๐ ุฅุฏุงุฑุฉ ุงูุชุนูููุงุช</h3>
                    <textarea id="admin-inst-text" rows="10" placeholder="ุงูุชุจ ุงูุชุนูููุงุช ููุง ูุชุธูุฑ ููุนููุงุก..." style="text-align:right;"></textarea>
                    <button class="btn" onclick="saveInstructions()">ุญูุธ ุงูุชุญุฏูุซุงุช</button>
                </div>
            </div>

            <div id="admin-set" class="admin-sec hidden">
                <div class="card" style="padding:15px;">
                    <div class="checkbox-container" style="margin-bottom:15px; padding:10px; background:rgba(255,255,255,0.05); border-radius:10px;">
                        <input type="checkbox" id="set-maintenance" style="width:20px; height:20px;">
                        <label for="set-maintenance" style="color:var(--error); font-weight:bold;">ุชูุนูู ูุถุน ุงูุตูุงูุฉ ๐๏ธ</label>
                    </div>
                    
                    <div class="checkbox-container" style="margin-bottom:15px; padding:10px; background:rgba(255,0,0,0.1); border:1px solid var(--error); border-radius:10px;">
                         <input type="checkbox" id="set-enableFlash" style="width:20px; height:20px;">
                         <label for="set-enableFlash" style="color:var(--error); font-weight:bold;">ุชูุนูู ูุธุงู ุงูุนุฑูุถ ุงูุฎุงุทูุฉ โก</label>
                    </div>

                    <label>ุฎุตู ุงูุนุงุฏู (ูุซุงู 0.05):</label>
                    <input type="text" id="set-discount">
                    <label>ุฎุตู ุงูููุฒุน (ุงูุฎููุฉ G):</label>
                    <input type="text" id="set-discount-gold">
                    <label>ุงูุญุฏ ุงูุฃุฏูู ููุชุฑููุฉ (ุงูุฎููุฉ H):</label>
                    <input type="number" id="set-minBalance" placeholder="0 ูุชุนุทูู ุงูููุฒุฉ">
                    <label>ุฑูู ุงููุงุชุณุงุจ ููุฏุนู (ุงูุฎููุฉ I):</label>
                    <input type="text" id="set-whatsapp" placeholder="96777xxxxxx">
                    
                    <label>ุจููุต ุงูุชุณุฌูู:</label>
                    <input type="text" id="set-bonus" placeholder="ุงุชุฑูู 0 ูุฅููุงู ุงูุฎุฏูุฉ">
                    
                    <label>ููุงูุฃุฉ ุงูุฅุญุงูุฉ (ููู ุตุฏูู):</label>
                    <input type="number" id="set-referralReward" placeholder="ูุซูุงู 50">

                    <label>ูุต ุงูุฅุนูุงู (ุงูุดุฑูุท ุงููุชุญุฑู):</label>
                    <input type="text" id="set-ads">

                    <label>ุงุณู ุงูุจูู ุงููุนุชูุฏ:</label>
                    <input type="text" id="set-bankName">
                    <label>ุฑูู ุงูุญุณุงุจ:</label>
                    <input type="text" id="set-bankAcc">
                    <label>ูุจูุบ ุงูุณููุฉ ุงูุงูุชุฑุงุถู:</label>
                    <input type="number" id="set-loanAmount">
                    
                    <label>ุฃุนูู ุณูู ููุจูุบ ุงูุญุธ:</label>
                    <input type="number" id="set-wheelMax" placeholder="ุงูุงูุชุฑุงุถู 50">

                    <label>ุจุงุณูุฑุฏ ุงููุฏูุฑ:</label>
                    <input type="text" id="set-adminPass">
                    <label>ุฅูููู ุงูุฅุดุนุงุฑุงุช:</label>
                    <input type="email" id="set-email">
                    
                    <label>ุฑุงุจุท ุงูุดุนุงุฑ (ุตูุฑุฉ):</label>
                    <input type="text" id="set-logoUrl" placeholder="ุฑุงุจุท ูุจุงุดุฑ ููุตูุฑุฉ">
                    
                    <div style="display:flex; justify-content:space-between; margin-top:10px;">
                        <label>ุชูุนูู ุงูุณููุฉ:</label>
                        <input type="checkbox" id="set-enableLoan" style="width:20px; height:20px;">
                    </div>
                     <div style="display:flex; justify-content:space-between; margin-top:10px;">
                        <label>ุชูุนูู ุงูุนุฌูุฉ:</label>
                        <input type="checkbox" id="set-enableWheel" style="width:20px; height:20px;">
                    </div>
                    
                    <button class="btn" onclick="playSound('click'); saveSettings()" style="margin-top:20px;">ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="script.js?v=2.6"></script>

</body>
</html>
